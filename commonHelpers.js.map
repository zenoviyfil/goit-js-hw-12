{"version":3,"file":"commonHelpers.js","sources":["../src/templates/markup.js","../src/services/api.js","../src/services/button.js","../src/main.js"],"sourcesContent":["function createMarkup(arr, gallery) {\n  const markup = arr\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        downloads,\n        comments,\n      }) => `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <ul class=\"gallery-item-description\">\n                <li>Likes: ${likes}</li>\n                <li>Views: ${views}</li>\n                <li>Downloads: ${downloads}</li>\n                <li>Comments: ${comments}</li>\n            </ul>\n        </a>\n    </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport {createMarkup};","import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nfunction getData({query, page = 1, per_page}){\n    return axios.get(\"\", {\n    params: {\n      key: '41812412-8184544d67aaee5dc545e6a16',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page,\n    }}).then(({data}) => data)\n}\n\nexport {getData}","const hidden = 'hidden';\n\nfunction hide(button) {\n    button.classList.add(hidden);\n}\n\nfunction show(button) {\n    button.classList.remove(hidden);\n}\n\nfunction enable(button, loader) {\n    loader.classList.add(hidden);\n    button.disabled = false;\n}\n\nfunction disable(button, loader) {\n    loader.classList.remove(hidden);\n    button.disabled = true;\n}\n\nexport default { hide, show, enable, disable };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createMarkup } from './templates/markup.js';\nimport { getData } from './services/api.js';\nimport button from './services/button.js';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.getElementById('loader'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nconst queryParams = {\n  query: '',\n  page: 1,\n  maxPage: 0,\n  per_page: 40,\n};\n\nrefs.searchForm.addEventListener('submit', handleSearch);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  refs.gallery.innerHTML = '';\n  queryParams.page = 1;\n  button.hide(refs.loadMoreBtn);\n\n  const form = event.currentTarget;\n  queryParams.query = form.elements.query.value.trim();\n\n  if (!queryParams.query) {\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await getData(queryParams);\n    queryParams.maxPage = Math.ceil(totalHits / queryParams.per_page);\n    if (hits.length === 0) {\n      iziToast.error({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n      });\n    }\n\n    createMarkup(hits, refs.gallery);\n\n    if (hits.length > 0 && hits.length !== totalHits) {\n      button.show(refs.loadMoreBtn);\n      refs.loadMoreBtn.addEventListener('click', handleLoadMore);\n    } else {\n      button.hide(refs.loadMoreBtn);\n    }\n  } catch (error) {\n    handleError(error);\n  } finally {\n    form.reset();\n    lightbox.refresh();\n  }\n}\n\nasync function handleLoadMore() {\n  queryParams.page += 1;\n  button.disable(refs.loadMoreBtn, refs.loader);\n  const box = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect();\n\n\n  try {\n    const { hits } = await getData(queryParams);\n    createMarkup(hits, refs.gallery);\n\n  } catch (error) {\n    handleError(error);\n  } finally {\n    button.enable(refs.loadMoreBtn, refs.loader);\n\n    window.scrollBy({ \n      top: box.height * 2, \n      left: 0, \n      behavior: 'smooth', \n    });\n\n    if (queryParams.page === queryParams.maxPage) {\n      button.hide(refs.loadMoreBtn);\n      refs.loadMoreBtn.removeEventListener('click', handleLoadMore);\n\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  }\n}\n\nfunction handleError(error) {\n  iziToast.error({\n    message: `Sorry, something went wrong. Please try again later!`,\n  });\n}\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  /* options */\n  captionsData: 'alt',\n  captionDelay: 250,\n});"],"names":["createMarkup","arr","gallery","markup","largeImageURL","webformatURL","tags","likes","views","downloads","comments","axios","getData","query","page","per_page","data","hidden","hide","button","show","enable","loader","disable","refs","queryParams","handleSearch","event","form","hits","totalHits","iziToast","handleLoadMore","handleError","lightbox","box","error","SimpleLightbox"],"mappings":"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"}