{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41812412-8184544d67aaee5dc545e6a16';\nconst url = `${API_URL}?key=${API_KEY}`;\n\nconst options = {\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\nfunction fetchData(searchValue) {\n  return fetch(`${url}&q=${searchValue}`, options).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nloader.classList.remove('loader');\n\nsearchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const searchValue = form.elements.query.value;\n\n  loader.classList.add('loader');\n\n  fetchData(searchValue)\n    .then(render)\n    .catch(handleError)\n    .finally(() => {\n      form.reset();\n      loader.classList.remove('loader');\n    });\n}\n\nfunction render(data) {\n  if (data.hits.length === 0) {\n    iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please try again!`,\n    });\n  }\n  gallery.innerHTML = createMarkup(data.hits);\n  lightbox.refresh();\n}\n\nfunction handleError(error) {\n  iziToast.error({\n    message: `Sorry, something went wrong. Please try again later!`,\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        downloads,\n        comments,\n      }) => `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <ul class=\"gallery-item-description\">\n                <li>Likes: ${likes}</li>\n                <li>Views: ${views}</li>\n                <li>Downloads: ${downloads}</li>\n                <li>Comments: ${comments}</li>\n            </ul>\n        </a>\n    </li>`\n    )\n    .join('');\n}\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  /* options */\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["API_URL","API_KEY","url","options","fetchData","searchValue","resp","searchForm","gallery","loader","handleSearch","event","form","render","handleError","data","iziToast","createMarkup","lightbox","error","arr","largeImageURL","webformatURL","tags","likes","views","downloads","comments","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAU,2BACVC,EAAU,qCACVC,EAAM,GAAGF,CAAO,QAAQC,CAAO,GAE/BE,EAAU,CACd,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EACA,SAASC,EAAUC,EAAa,CAC9B,OAAO,MAAM,GAAGH,CAAG,MAAMG,CAAW,GAAIF,CAAO,EAAE,KAAKG,GAAQ,CAC5D,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,OAAO,QAAQ,EAEhCF,EAAW,iBAAiB,SAAUG,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAOD,EAAM,cACbN,EAAcO,EAAK,SAAS,MAAM,MAExCH,EAAO,UAAU,IAAI,QAAQ,EAE7BL,EAAUC,CAAW,EAClB,KAAKQ,CAAM,EACX,MAAMC,CAAW,EACjB,QAAQ,IAAM,CACbF,EAAK,MAAK,EACVH,EAAO,UAAU,OAAO,QAAQ,CACtC,CAAK,CACL,CAEA,SAASI,EAAOE,EAAM,CAChBA,EAAK,KAAK,SAAW,GACvBC,EAAS,MAAM,CACb,QAAS,0EACf,CAAK,EAEHR,EAAQ,UAAYS,EAAaF,EAAK,IAAI,EAC1CG,EAAS,QAAO,CAClB,CAEA,SAASJ,EAAYK,EAAO,CAC1BH,EAAS,MAAM,CACb,QAAS,sDACb,CAAG,CACH,CAEA,SAASC,EAAaG,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CACC,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,UAAAC,EACA,SAAAC,CACR,IAAY;AAAA,mBACON,CAAa;AAAA,0CACUC,CAAY,UAAUC,CAAI;AAAA;AAAA,6BAEvCC,CAAK;AAAA,6BACLC,CAAK;AAAA,iCACDC,CAAS;AAAA,gCACVC,CAAQ;AAAA;AAAA;AAAA,UAInC,EACA,KAAK,EAAE,CACZ,CAEA,IAAIT,EAAW,IAAIU,EAAe,aAAc,CAE9C,aAAc,MACd,aAAc,GAChB,CAAC"}